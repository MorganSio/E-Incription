{% extends 'base.html.twig' %}

{% block title %}Représentant Légal{% endblock %}

{% block body %}
    {% for flash_error in app.flashes('verify_email_error') %}
        <div class="alert alert-danger" role="alert">{{ flash_error }}</div>
    {% endfor %}

    <main role="main" id="content">
        <form method="post" action="{{ path('fiche-representant-legal') }}">
        
        <!-- Section 1 -->
        <article id="mdlFirst">
            <div class="fr-container fr-container--fluid fr-mb-md-14v">
                <div class="fr-grid-row fr-grid-row--gutters fr-grid-row--center">
                    <div class="fr-col-12 fr-col-md-10 fr-col-lg-8">
                        <div class="fr-container fr-background-alt--grey fr-px-md-0 fr-pt-10v fr-pt-md-14v fr-pb-6v fr-pb-md-10v">
                            <div class="fr-grid-row fr-grid-row--gutters fr-grid-row--center">
                                <div class="fr-col-12 fr-col-md-10 fr-col-lg-9">
                                    <h1 class="fr-h1">Représentants Légaux</h1>
                                
                                    <form id='fixes an issue with the forms, might be bad practice,shoud suerly do a fieldset instead of a form in a form'>
                                    </form>
                                    {% for i in 1..2 %}
                                    <div>
                                        <form class="fr-mb-0" id="representant{{ i }}">
                                            <fieldset class="fr-mb-0 fr-fieldset" id="representant-fieldset-{{ i }}" aria-labelledby="representant-fieldset-legend-{{ i }}">
                                                <legend class="fr-fieldset__legend" id="representant-fieldset-legend-{{ i }}">
                                                    <h3 class="fr-h5">Représentant Légal {{ i }}</h3>
                                                </legend>
                                                <div class="fr-fieldset__element">
                                                    <p class="fr-hint-text">Veuillez remplir les informations ci-dessous.</p>
                                                </div>
                                                <div>
                                                    <form class="fr-mb-0" id="identity{{ i +1 }}">
                                                        <fieldset class="fr-mb-0 fr-fieldset" id="identity-fieldset" aria-labelledby="identity-fieldset-legend identity-fieldset-messages">
                                                            <legend class="fr-fieldset__legend" id="identity-fieldset-legend">
                                                                <h3 class="fr-h5">Identité personnelle</h3>
                                                            </legend>
                                                            <div class="fr-fieldset__element">
                                                                <p class="fr-hint-text">Sauf mention contraire, tous les champs sont obligatoires.</p>
                                                            </div>
                                                            <div class="fr-fieldset__element">
                                                                <fieldset class="fr-fieldset" id="sex-9533" aria-labelledby="sex-9533-legend sex-9533-messages">
                                                                    <legend class="fr-fieldset__legend--regular fr-fieldset__legend" id="sex-9533-legend">
                                                                        lien avec l'enfant
                                                                    </legend>
                                                                    <div class="fr-fieldset__element">
                                                                        <div class="fr-radio-group fr-radio-group--sm">
                                                                            <input type="radio" id="pere-{{ i }}" value="pere" name="lien{{ i }}">
                                                                            <label class="fr-label" for="pere-{{ i }}">Père</label>
                                                                        </div>
                                                                    </div>
                                                                    <div class="fr-fieldset__element">
                                                                        <div class="fr-radio-group fr-radio-group--sm">
                                                                            <input type="radio" id="mere-{{ i }}" value="mere" name="lien{{ i }}">
                                                                            <label class="fr-label" for="mere-{{ i }}">
                                                                                Mère
                                                                            </label>
                                                                        </div>
                                                                    </div>
                                                                    <div class="fr-fieldset__element">
                                                                        <div class="fr-radio-group fr-radio-group--sm">
                                                                            <input type="radio" id="autre-{{ i }}" value="autre" name="lien{{ i }}">
                                                                            <label class="fr-label" for="autre-{{ i }}">
                                                                                Autre
                                                                            </label>
                                                                        </div>
                                                                    </div>
                                                                    <div class="fr-fieldset__element">
                                                                        <div class="fr-input-group">
                                                                            <label class="fr-label" for="preciser{{ i }}">Préciser si autre</label>
                                                                            <input class="fr-input" type="text" id="preciser{{ i }}" name="preciser{{ i }}">
                                                                        </div>
                                                                    </div>
                                                                    <div class="fr-messages-group" id="lien-9533-messages" aria-live="polite">
                                                                    </div>
                                                                </fieldset>
                                                            </div>
                                                            <hr>
                                                            <div class="fr-fieldset__element">
                                                                <fieldset class="fr-fieldset" id="name-9545" aria-labelledby="name-9545-legend name-9545-messages">
                                                                    <div class="fr-fieldset__element">
                                                                        <p class="fr-text">Autorisez-vous la communication de votre adresse aux associations de parents d'élèves ?</p>
                                                                        <div class="fr-radio-group">
                                                                            <input type="radio" id="autorisation_oui{{ i }}" name="autorisation{{ i }}" value="oui">
                                                                            <label class="fr-label" for="autorisation_oui{{ i }}">Oui</label>
                                                                        </div>
                                                                        <div class="fr-radio-group">
                                                                            <input type="radio" id="autorisation_non{{ i }}" name="autorisation{{ i }}" value="non">
                                                                            <label class="fr-label" for="autorisation_non{{ i }}">Non</label>
                                                                        </div>
                                                                    </div>
                                                                    <div class="fr-fieldset__element">
                                                                        <fieldset class="fr-mb-n4v fr-fieldset" id="name-fieldset-{{ i }}" aria-labelledby="name-fieldset-{{ i }}-legend name-fieldset-{{ i }}-messages">
                                                                            <legend class="fr-fieldset__legend" id="name-fieldset-{{ i }}-legend">
                                                                                <h3 class="fr-h5">Identité</h3>
                                                                            </legend>

                                                                            <!-- Prénom -->
                                                                            <div class="fr-fieldset__element">
                                                                                <div class="fr-input-group" id="input-group-given-{{ i }}">
                                                                                    <label class="fr-label" for="given-{{ i }}">
                                                                                        Prénom
                                                                                    </label>
                                                                                    <input class="fr-input" aria-describedby="given-{{ i }}-messages" name="given-name" 
                                                                                        autocomplete="given-name" id="given-{{ i }}" spellcheck="false" 
                                                                                        type="text" placeholder="Ex : Jean" required>
                                                                                    <div class="fr-messages-group" id="given-{{ i }}-messages" aria-live="polite"></div>
                                                                                </div>
                                                                            </div>

                                                                            <!-- Nom -->
                                                                            <div class="fr-fieldset__element">
                                                                                <div class="fr-input-group" id="input-group-family-{{ i }}">
                                                                                    <label class="fr-label" for="family-{{ i }}">
                                                                                        Nom
                                                                                    </label>
                                                                                    <input class="fr-input" aria-describedby="family-{{ i }}-messages" name="family-name" 
                                                                                        autocomplete="family-name" id="family-{{ i }}" spellcheck="false" 
                                                                                        type="text" placeholder="Ex : Dupont" required>
                                                                                    <div class="fr-messages-group" id="family-{{ i }}-messages" aria-live="polite"></div>
                                                                                </div>
                                                                            </div>

                                                                            <div class="fr-messages-group" id="name-fieldset-{{ i }}-messages" aria-live="polite"></div>
                                                                        </fieldset>
                                                                    </div>
                                                                </fieldset>
                                                            </div>
                                                        </fieldset>
                                                        <fieldset class="fr-mb-0 fr-fieldset" id="identity-fieldset{{ i }}" aria-labelledby="identity-fieldset-legend{{ i }} identity-fieldset-messages{{ i }}">
                                                            <legend class="fr-fieldset__legend" id="identity-fieldset-legend{{ i }}">
                                                                <h3 class="fr-h5">Coordonnées personnelles</h3>
                                                            </legend>
                                                            <div class="fr-fieldset__element">
                                                                <p class="fr-hint-text">Sauf mention contraire, tous les champs sont obligatoires.</p>
                                                            </div>
                                                            <div class="fr-fieldset__element">
                                                                <fieldset class="fr-fieldset" id="address-9729{{ i }}" aria-labelledby="address-9729-legend{{ i }} address-9729-messages{{ i }}">
                                                                    <legend class="fr-sr-only" id="address-9729-legend{{ i }}">
                                                                        Adresse postale
                                                                    </legend>
                                                                    <div class="fr-fieldset__element">
                                                                        <div class="fr-input-group" id="input-group-9736{{ i }}">
                                                                            <label class="fr-label" for="address-9725{{ i }}">
                                                                                Adresse
                                                                                <span class="fr-hint-text">Indication : numéro et voie</span>
                                                                            </label>
                                                                            <input class="fr-input" aria-describedby="address-9725-messages{{ i }}" name="addresse-voie{{ i }}" 
                                                                                autocomplete="address-line1" id="address-9725{{ i }}" type="text" placeholder="Ex : 12 rue de Paris" required>
                                                                            {# <div class="fr-messages-group" id="address-9725-messages{{ i }}" aria-live="polite"></div> #}
                                                                        </div>
                                                                    </div>
                                                                    <div class="fr-fieldset__element fr-fieldset__element--inline fr-fieldset__element--postal">
                                                                        <div class="fr-input-group" id="input-group-9738{{ i }}">
                                                                            <label class="fr-label" for="postal-9727{{ i }}">
                                                                                Code postal
                                                                                <span class="fr-hint-text">Format attendu : 5 chiffres</span>
                                                                            </label>
                                                                            <input class="fr-input" aria-describedby="postal-9727-messages{{ i }}" name="postal-code{{ i }}" 
                                                                                autocomplete="postal-code" id="postal-9727{{ i }}" type="text" pattern="\d{5}" 
                                                                                placeholder="75001" required>
                                                                            {# <div class="fr-messages-group" id="postal-9727-messages{{ i }}" aria-live="polite"></div> #}
                                                                        </div>
                                                                    </div>
                                                                    <div class="fr-fieldset__element fr-fieldset__element--inline@md fr-fieldset__element--inline-grow">
                                                                        <div class="fr-input-group" id="input-group-9739{{ i }}">
                                                                            <label class="fr-label" for="city-9728{{ i }}">
                                                                                Ville ou commune
                                                                                <span class="fr-hint-text">Exemple : Chartre</span>
                                                                            </label>
                                                                            <input class="fr-input" aria-describedby="city-9728-messages{{ i }}" name="addresse-city{{ i }}" 
                                                                                autocomplete="address-level2" id="city-9728{{ i }}" type="text" placeholder="Ex : Lyon" required>
                                                                            {# <div class="fr-messages-group" id="city-9728-messages{{ i }}" aria-live="polite"></div> #}
                                                                        </div>
                                                                    </div>
                                                                    <div class="fr-messages-group" id="address-9729-messages{{ i }}" aria-live="polite"></div>
                                                                </fieldset>
                                                            </div>
                                                        </fieldset>
                                                        <fieldset class="fr-mb-0 fr-fieldset" id="identity-fieldset" aria-labelledby="identity-fieldset-legend identity-fieldset-messages">
                                                            <legend class="fr-fieldset__legend" id="identity-fieldset-legend">
                                                                <h3 class="fr-h5">Coordonnées</h3>
                                                            </legend>
                                                            <div class="fr-fieldset__element">
                                                                <p class="fr-hint-text">Sauf mention contraire, tous les champs sont obligatoires.</p>
                                                            </div>
                                                            <div class="fr-fieldset__element">
                                                                <div class="fr-input-group">
                                                                    <label class="fr-label" for="courriel{{ i }}">Courriel</label>
                                                                    <input class="fr-input" type="email" id="courriel{{ i }}" name="courriel{{ i }}" required>
                                                                </div>
                                                                <div class="fr-input-group">
                                                                    <label class="fr-label" for="telephone_domicile{{ i }}">Téléphone Domicile</label>
                                                                    <input class="fr-input" type="tel" id="telephone_domicile{{ i }}" name="telephone_domicile{{ i }}">
                                                                </div>
                                                                <div class="fr-input-group">
                                                                    <label class="fr-label" for="telephone_travail{{ i }}">Téléphone Travail</label>
                                                                    <input class="fr-input" type="tel" id="telephone_travail{{ i }}" name="telephone_travail{{ i }}">
                                                                </div>
                                                                <div class="fr-input-group">
                                                                    <label class="fr-label" for="telephone_mobile{{ i }}">Téléphone Mobile</label>
                                                                    <input class="fr-input" type="tel" id="telephone_mobile{{ i }}" name="telephone_mobile{{ i }}">
                                                                </div>
                                                                <div class="fr-checkbox-group">
                                                                    <input type="checkbox" id="sms{{ i }}" name="sms{{ i }}">
                                                                    <label class="fr-label" for="sms{{ i }}">Acceptez-vous les SMS ?</label>
                                                                </div>
                                                            </div>
                                                        </fieldset>
                                                        <fieldset class="fr-mb-0 fr-fieldset" id="identity-fieldset" aria-labelledby="identity-fieldset-legend identity-fieldset-messages">
                                                            <legend class="fr-fieldset__legend" id="identity-fieldset-legend">
                                                                <h3 class="fr-h5">Profession</h3>
                                                            </legend>
                                                            <div class="fr-fieldset__element">
                                                                <p class="fr-hint-text">Sauf mention contraire, tous les champs sont obligatoires.</p>
                                                            </div>
                                                            <div class="fr-fieldset__element">
                                                                <div class="fr-input-group">
                                                                    <label class="fr-label" for="profession{{ i }}">Profession</label>
                                                                    <input class="fr-input" type="text" id="profession{{ i }}" name="profession{{ i }}">
                                                                </div>
                                                            </div>
                                                            <div class="fr-fieldset__element">
                                                                <div class="fr-input-group">
                                                                    <label class="fr-label" for="nom_employeur{{ i }}">Nom de l'employeur</label>
                                                                    <input class="fr-input" type="text" id="nom_employeur{{ i }}" name="nom_employeur{{i}}">
                                                                </div>
                                                            </div>
                                                            <div class="fr-fieldset__element">
                                                                <div class="fr-input-group">
                                                                    <label class="fr-label" for="adresse_employeur{{ i }}">Adresse de l'employeur</label>
                                                                    <input class="fr-input" type="text" id="adresse_employeur{{ i }} " name="adresse_employeur{{ i }}">
                                                                </div>
                                                            </div>
                                                        </fieldset>
                                                    </form>
                                                </div>
                                                <div class="fr-fieldset__element">
                                                    <ul class="fr-mt-2v fr-btns-group fr-btns-group--right">
                                                        <li>
                                                            <button type="button" class="fr-btn" id="validateRepresentantLegaux{{ i }}" data-index="{{ i }}">
                                                                Valider Représentant {{ i }}
                                                            </button>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </fieldset>
                                        </form>
                                    </div>
                                    <hr>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </article>
        </form>
    </main>
{% endblock %}